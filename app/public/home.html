<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder Homepage</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>

    <button id="delete-user-btn">TEST DELETE BUTTON</button>
    

    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
    var Friend = function(name, photo, scores) {
        this.name = name;
        this.photo = photo;
        this.scores = scores;
    }
    
    $(document).ready(function() {
        $("#submit-survey").on("click", function(event) {
            event.preventDefault();
            var enteredName = $("#name-entry").val().trim();
            var photoUrl = $("#photo-entry").val().trim();
            var scoreArray = [];
            for (var i = 0; i < 10; i++) {
                var answer = parseInt($("#survey-answer-" + i).val());
                scoreArray.push(answer);
            }
            var friendSubmission = new Friend(enteredName, photoUrl, scoreArray);
            addNewUser(friendSubmission);
            
        })
    
        $("#delete-user-btn").on("click", function(event) {
            event.preventDefault();
            var userTane = new Friend("Tane", null, null);
            deleteUser(userTane);
        })
    })
    
    var pulledArray = [];
    
    function fetchUsers() {
        $.get("/api/friends").then(function(data) {
            pulledArray = [];
            console.log(data);
            for (var i = 0; i < data.length; i++) {
                pulledArray.push(data[i]);
            }
        })
    }
    
    function addNewUser(friendObject) {
        $.post("/api/friends", friendObject)
            .then(function(dat) {
                console.log("home.html", dat);
                console.log("New user added.");            
            })
    }
    
    function findMatches(friendObject) {
    
    }
    
    function deleteUser(friendObject) {
        $.ajax({
            method: "DELETE",
            url: "/api/friends",
            data: friendObject
        }).then(function(dat) {
            console.log("home.html", dat);
            console.log("User deleted.");
            
        })
    }
    </script>
</body>
</html>